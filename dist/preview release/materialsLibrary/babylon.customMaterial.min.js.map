{"version":3,"sources":["webpack://MATLIB/webpack/universalModuleDefinition","webpack://MATLIB/webpack/bootstrap","webpack://MATLIB/../src/custom/index.ts","webpack://MATLIB/./legacy-custom.ts","webpack://MATLIB/(webpack)/buildin/global.js","webpack://MATLIB/../src/custom/customMaterial.ts","webpack://MATLIB/external {\"root\":\"BABYLON\",\"commonjs\":\"babylonjs\",\"commonjs2\":\"babylonjs\",\"amd\":\"babylonjs\"}"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__4__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__export","MatLib","globalObject","global","undefined","BABYLON","g","this","Function","eval","e","babylonjs_1","CustomShaderStructure","ShaderSpecialParts","CustomMaterial","_super","scene","_this","CustomParts","customShaderNameResolve","Builder","FragmentShader","Effect","ShadersStore","VertexShader","__extends","AttachAfterBind","mesh","effect","el","_newUniformInstances","ea","toString","split","setVector2","setVector3","setVector4","setMatrix","setFloat","_newSamplerInstances","isReady","setTexture","ReviewUniform","arr","ind","_newUniforms","_customUniform","indexOf","push","shaderName","uniforms","uniformBuffers","samplers","defines","_isCreatedShader","_createdShaderName","ShaderIndexer","fn_afterBind","_afterBind","replace","Vertex_Begin","join","Vertex_Definitions","Vertex_MainBegin","Vertex_Before_PositionUpdated","Vertex_Before_NormalUpdated","Fragment_Begin","Fragment_MainBegin","Fragment_Definitions","Fragment_Custom_Diffuse","Fragment_Custom_Alpha","Fragment_Before_FragColor","AddUniform","kind","param","Array","shaderPart","StandardMaterial"],"mappings":"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","file":"babylon.customMaterial.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"babylonjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"babylonjs-materials\", [\"babylonjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"babylonjs-materials\"] = factory(require(\"babylonjs\"));\n\telse\n\t\troot[\"MATLIB\"] = factory(root[\"BABYLON\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__4__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export * from \"./customMaterial\";","import * as MatLib from \"../src/custom/index\";\r\n\r\n/**\r\n * This is the entry point for the UMD module.\r\n * The entry point for a future ESM package should be index.ts\r\n */\r\nvar globalObject = (typeof global !== 'undefined') ? global : ((typeof window !== 'undefined') ? window : undefined);\r\nif (typeof globalObject !== \"undefined\") {\r\n    for (var key in MatLib) {\r\n        (<any>globalObject).BABYLON[key] = (<any>MatLib)[key];\r\n    }\r\n}\r\n\r\nexport * from \"../src/custom/index\";","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { StandardMaterial, Texture, Mesh, Effect, StandardMaterialDefines, Scene } from \"babylonjs\";\n\nexport class CustomShaderStructure {\n\n    public FragmentStore: string;\n    public VertexStore: string;\n\n    constructor() { }\n}\n\nexport class ShaderSpecialParts {\n\n    constructor() { }\n\n    public Fragment_Begin: string;\n    public Fragment_Definitions: string;\n    public Fragment_MainBegin: string;\n\n    // diffuseColor\n    public Fragment_Custom_Diffuse: string;\n\n    // alpha\n    public Fragment_Custom_Alpha: string;\n\n    public Fragment_Before_FragColor: string;\n\n    public Vertex_Begin: string;\n    public Vertex_Definitions: string;\n    public Vertex_MainBegin: string;\n\n    // positionUpdated\n    public Vertex_Before_PositionUpdated: string;\n\n    // normalUpdated\n    public Vertex_Before_NormalUpdated: string;\n}\n\nexport class CustomMaterial extends StandardMaterial {\n    public static ShaderIndexer = 1;\n    public CustomParts: ShaderSpecialParts;\n    _isCreatedShader: boolean;\n    _createdShaderName: string;\n    _customUniform: string[];\n    _newUniforms: string[];\n    _newUniformInstances: any[];\n    _newSamplerInstances: Texture[];\n\n    public  FragmentShader : string ;\n    public  VertexShader : string ;\n\n    public AttachAfterBind(mesh: Mesh, effect: Effect) {\n        for (var el in this._newUniformInstances) {\n            var ea = el.toString().split('-');\n            if (ea[0] == 'vec2') {\n                effect.setVector2(ea[1], this._newUniformInstances[el]);\n            }\n            else if (ea[0] == 'vec3') {\n                effect.setVector3(ea[1], this._newUniformInstances[el]);\n            }\n            else if (ea[0] == 'vec4') {\n                effect.setVector4(ea[1], this._newUniformInstances[el]);\n            }\n            else if (ea[0] == 'mat4') {\n                effect.setMatrix(ea[1], this._newUniformInstances[el]);\n            }\n            else if (ea[0] == 'float') {\n                effect.setFloat(ea[1], this._newUniformInstances[el]);\n            }\n        }\n        for (var el in this._newSamplerInstances) {\n            var ea = el.toString().split('-');\n            if (ea[0] == 'sampler2D' && this._newSamplerInstances[el].isReady && this._newSamplerInstances[el].isReady()) {\n                effect.setTexture(ea[1], this._newSamplerInstances[el]);\n            }\n        }\n    }\n\n    public ReviewUniform(name: string, arr: string[]): string[] {\n        if (name == \"uniform\") {\n            for (var ind in this._newUniforms) {\n                if (this._customUniform[ind].indexOf('sampler') == -1) {\n                    arr.push(this._newUniforms[ind]);\n                }\n            }\n        }\n        if (name == \"sampler\") {\n            for (var ind in this._newUniforms) {\n                if (this._customUniform[ind].indexOf('sampler') != -1) {\n                    arr.push(this._newUniforms[ind]);\n                }\n            }\n        }\n        return arr;\n    }\n\n    public Builder(shaderName: string, uniforms: string[], uniformBuffers: string[], samplers: string[], defines: StandardMaterialDefines): string {\n\n        if (this._isCreatedShader) {\n            return this._createdShaderName;\n        }\n        this._isCreatedShader = false;\n\n        CustomMaterial.ShaderIndexer++;\n        var name: string = \"custom_\" + CustomMaterial.ShaderIndexer;\n\n        this.ReviewUniform(\"uniform\", uniforms);\n        this.ReviewUniform(\"sampler\", samplers);\n\n        var fn_afterBind = this._afterBind.bind(this);\n        this._afterBind = (m, e) => {\n            if (!e) {\n                return;\n            }\n            this.AttachAfterBind(m, e);\n            try { fn_afterBind(m, e); }\n            catch (e) { }\n        };\n\n        BABYLON.Effect.ShadersStore[name + \"VertexShader\"] = this.VertexShader\n            .replace('#define CUSTOM_VERTEX_BEGIN', (this.CustomParts.Vertex_Begin ? this.CustomParts.Vertex_Begin : \"\"))\n            .replace('#define CUSTOM_VERTEX_DEFINITIONS', (this._customUniform ? this._customUniform.join(\"\\n\") : \"\") + (this.CustomParts.Vertex_Definitions ? this.CustomParts.Vertex_Definitions : \"\"))\n            .replace('#define CUSTOM_VERTEX_MAIN_BEGIN', (this.CustomParts.Vertex_MainBegin ? this.CustomParts.Vertex_MainBegin : \"\"))\n            .replace('#define CUSTOM_VERTEX_UPDATE_POSITION', (this.CustomParts.Vertex_Before_PositionUpdated ? this.CustomParts.Vertex_Before_PositionUpdated : \"\"))\n            .replace('#define CUSTOM_VERTEX_UPDATE_NORMAL', (this.CustomParts.Vertex_Before_NormalUpdated ? this.CustomParts.Vertex_Before_NormalUpdated : \"\"));\n\n            // #define CUSTOM_VERTEX_MAIN_END\n\n        BABYLON.Effect.ShadersStore[name + \"PixelShader\"] = this.FragmentShader\n            .replace('#define CUSTOM_FRAGMENT_BEGIN', (this.CustomParts.Fragment_Begin ? this.CustomParts.Fragment_Begin : \"\"))\n            .replace('#define CUSTOM_FRAGMENT_MAIN_BEGIN', (this.CustomParts.Fragment_MainBegin ? this.CustomParts.Fragment_MainBegin : \"\"))\n            .replace('#define CUSTOM_FRAGMENT_DEFINITIONS', (this._customUniform ? this._customUniform.join(\"\\n\") : \"\") + (this.CustomParts.Fragment_Definitions ? this.CustomParts.Fragment_Definitions : \"\"))\n            .replace('#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE', (this.CustomParts.Fragment_Custom_Diffuse ? this.CustomParts.Fragment_Custom_Diffuse : \"\"))\n            .replace('#define CUSTOM_FRAGMENT_UPDATE_ALPHA', (this.CustomParts.Fragment_Custom_Alpha ? this.CustomParts.Fragment_Custom_Alpha : \"\"))\n            .replace('#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR', (this.CustomParts.Fragment_Before_FragColor ? this.CustomParts.Fragment_Before_FragColor : \"\"));\n\n            // #define CUSTOM_FRAGMENT_BEFORE_LIGHTS\n\n            // #define CUSTOM_FRAGMENT_BEFORE_FOG\n\n        this._isCreatedShader = true;\n        this._createdShaderName = name;\n\n        return name;\n    }\n\n    constructor(name: string, scene: Scene) {\n        super(name, scene);\n        this.CustomParts = new ShaderSpecialParts();\n        this.customShaderNameResolve = this.Builder;\n\n        this.FragmentShader = BABYLON.Effect.ShadersStore[\"defaultPixelShader\"];\n        this.VertexShader = BABYLON.Effect.ShadersStore[\"defaultVertexShader\"];\n    }\n\n    public AddUniform(name: string, kind: string, param: any): CustomMaterial {\n        if (!this._customUniform) {\n            this._customUniform = new Array();\n            this._newUniforms = new Array();\n            this._newSamplerInstances = new Array();\n            this._newUniformInstances = new Array();\n        }\n        if (param) {\n            if (kind.indexOf(\"sampler\") == -1) {\n                (<any>this._newUniformInstances)[kind + \"-\" + name] = param;\n            }\n            else {\n                (<any>this._newUniformInstances)[kind + \"-\" + name] = param;\n            }\n        }\n        this._customUniform.push(\"uniform \" + kind + \" \" + name + \";\");\n        this._newUniforms.push(name);\n\n        return this;\n    }\n\n    public Fragment_Begin(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_Begin = shaderPart;\n        return this;\n    }\n\n    public Fragment_Definitions(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_Definitions = shaderPart;\n        return this;\n    }\n\n    public Fragment_MainBegin(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_MainBegin = shaderPart;\n        return this;\n    }\n\n    public Fragment_Custom_Diffuse(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_Custom_Diffuse = shaderPart.replace(\"result\", \"diffuseColor\");\n        return this;\n    }\n\n    public Fragment_Custom_Alpha(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_Custom_Alpha = shaderPart.replace(\"result\", \"alpha\");\n        return this;\n    }\n\n    public Fragment_Before_FragColor(shaderPart: string): CustomMaterial {\n        this.CustomParts.Fragment_Before_FragColor = shaderPart.replace(\"result\", \"color\");\n        return this;\n    }\n\n    public Vertex_Begin(shaderPart: string): CustomMaterial {\n        this.CustomParts.Vertex_Begin = shaderPart;\n        return this;\n    }\n\n    public Vertex_Definitions(shaderPart: string): CustomMaterial {\n        this.CustomParts.Vertex_Definitions = shaderPart;\n        return this;\n    }\n\n    public Vertex_MainBegin(shaderPart: string): CustomMaterial {\n        this.CustomParts.Vertex_MainBegin = shaderPart;\n        return this;\n    }\n\n    public Vertex_Before_PositionUpdated(shaderPart: string): CustomMaterial {\n        this.CustomParts.Vertex_Before_PositionUpdated = shaderPart.replace(\"result\", \"positionUpdated\");\n        return this;\n    }\n\n    public Vertex_Before_NormalUpdated(shaderPart: string): CustomMaterial {\n        this.CustomParts.Vertex_Before_NormalUpdated = shaderPart.replace(\"result\", \"normalUpdated\");\n        return this;\n    }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;"],"sourceRoot":""}