var BABYLON;!(function(r){var e=(function(){function e(){this.extensions={".gltf":{isBinary:!1},".glb":{isBinary:!0}}}return e.prototype.importMeshAsync=function(r,t,n,o,a,i){var s=e._parse(n),u=this._getLoader(s);return!!u&&u.importMeshAsync(r,t,s,o,a,i)},e.prototype.loadAsync=function(r,t,n,o,a){var i=e._parse(t),s=this._getLoader(i);return!!s&&s.loadAsync(r,i,n,o,a)},e._parse=function(r){return r instanceof ArrayBuffer?e._parseBinary(r):{json:JSON.parse(r),bin:null}},e.prototype._getLoader=function(t){var n={major:2,minor:0},o=t.json.asset||{},a=e._parseVersion(o.version);if(!a)return r.Tools.Error("Invalid version"),null;var i=e._parseVersion(o.minVersion);if(i&&e._compareVersion(i,n)>0)return r.Tools.Error("Incompatible version"),null;var s={1:e.GLTFLoaderV1,2:e.GLTFLoaderV2},u=s[a.major];return void 0===u?(r.Tools.Error("Unsupported version"),null):null===u?(r.Tools.Error("v"+a.major+" loader is not available"),null):u},e._parseBinary=function(n){var o={Magic:1179937895},a=new t(n),i=a.readUint32();if(i!==o.Magic)return r.Tools.Error("Unexpected magic: "+i),null;var s=a.readUint32();switch(s){case 1:return e._parseV1(a);case 2:return e._parseV2(a)}return r.Tools.Error("Unsupported version: "+s),null},e._parseV1=function(t){var n={JSON:0},o=t.readUint32();if(o!=t.getLength())return r.Tools.Error("Length in header does not match actual data length: "+o+" != "+t.getLength()),null;var a,i=t.readUint32(),s=t.readUint32();switch(s){case n.JSON:a=JSON.parse(e._decodeBufferToText(t.readUint8Array(i)));break;default:return r.Tools.Error("Unexpected content format: "+s),null}var u=t.getLength()-t.getPosition();return{json:a,bin:t.readUint8Array(u)}},e._parseV2=function(t){var n={JSON:1313821514,BIN:5130562},o=t.readUint32();if(o!==t.getLength())return r.Tools.Error("Length in header does not match actual data length: "+o+" != "+t.getLength()),null;var a=t.readUint32(),i=t.readUint32();if(i!==n.JSON)return r.Tools.Error("First chunk format is not JSON"),null;for(var s=JSON.parse(e._decodeBufferToText(t.readUint8Array(a))),u=null;t.getPosition()<t.getLength();)switch(a=t.readUint32(),i=t.readUint32()){case n.JSON:return r.Tools.Error("Unexpected JSON chunk"),null;case n.BIN:u=t.readUint8Array(a);break;default:t.skipBytes(a)}return{json:s,bin:u}},e._parseVersion=function(r){if(!r)return null;var e=r.split(".");if(0===e.length)return null;var t=parseInt(e[0]);if(t>1&&2!=e.length)return null;parseInt(e[1]);return{major:t,minor:parseInt(e[0])}},e._compareVersion=function(r,e){return r.major>e.major?1:r.major<e.major?-1:r.minor>e.minor?1:r.minor<e.minor?-1:0},e._decodeBufferToText=function(r){for(var e="",t=r.byteLength,n=0;n<t;++n)e+=String.fromCharCode(r[n]);return e},e})();e.GLTFLoaderV1=null,e.GLTFLoaderV2=null,e.HomogeneousCoordinates=!1,e.IncrementalLoading=!0,r.GLTFFileLoader=e;var t=(function(){function r(r){this._arrayBuffer=r,this._dataView=new DataView(r),this._byteOffset=0}return r.prototype.getPosition=function(){return this._byteOffset},r.prototype.getLength=function(){return this._arrayBuffer.byteLength},r.prototype.readUint32=function(){var r=this._dataView.getUint32(this._byteOffset,!0);return this._byteOffset+=4,r},r.prototype.readUint8Array=function(r){var e=new Uint8Array(this._arrayBuffer,this._byteOffset,r);return this._byteOffset+=r,e},r.prototype.skipBytes=function(r){this._byteOffset+=r},r})();r.SceneLoader.RegisterPlugin(new e)})(BABYLON||(BABYLON={}));